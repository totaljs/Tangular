(function(e){if(e.Tangular)return;var t={};var v=t.helpers={};t.version='v5.0.0';t.cache={};e.Ta=e.Tangular=t;e.Thelpers=v;var s={null:true,undefined:true,true:true,false:true,Object:1,String:1,Number:1,Boolean:1,Date:1,Array:1,window:1,global:1,arguments:1,eval:1,Function:1,function:1,var:1,let:1,const:1,delete:1};var n=/\{\{.*?\}\}/g;var b=/\{\{|\}\}/g;var r=/[<>&"]/g;var i=/\n$/g;function g(e,r){var t='';var n=[];var i=0;for(var a=0;a<e.length;a++){var l=e.charCodeAt(a);if(!i){if(t&&l>47&&l<58||l>64&&l<91||l>96&&l<123||(l===95||l===36)){t+=e.charAt(a);continue}if(t){if(!s[t]&&n.indexOf(t)===-1&&(!r||r.indexOf(t)===-1))n.push(t);t=''}}if(l===46||l===124){i=l}else if((i===46||i===124)&&l===40){i=0}else if(l===96||l===34||l===39){if(l===i)i=0;else i=l}}if(t&&!s[t]&&n.indexOf(t)===-1&&(!r||r.indexOf(t)===-1))n.push(t);return n}t.toArray=function(e){var r=Object.keys(e);var t=[];for(var n=0,i=r.length;n<i;n++)t.push({key:r[n],value:e[r[n]]});return t};function a(){this.commands;this.variables;this.builder;this.split='\0'}a.prototype.compile=function(e){var v=this;var p=0;var h=0;var m;var d=[];v.template=e;v.variables={};v.commands=[];v.builder=e.replace(n,function(e){var r=e.replace(b,'').trim();var t=null;var n=null;var i;var a=false;var l=false;var s=true;if(r==='fi'){p--}else if(r==='end'){h--;d.pop()}else if(r.substring(0,3)==='if '){p++;t=g(r.substring(3),d);if(t.length){for(var u=0;u<t.length;u++){var o=t[u];if(v.variables[o])v.variables[o]++;else v.variables[o]=1}}else t=null;a=true;s=true}else if(r.substring(0,8)==='foreach '){h++;m=r.substring(8).split(' ');d.push(m[0].trim());i=m[2].indexOf('.');if(i!==-1)m[2]=m[2].substring(0,i);t=m[2].trim();if(d.indexOf(t)===-1){if(v.variables[t])v.variables[t]++;else v.variables[t]=1;t=[t]}else t=null;l=true}else if(r.substring(0,8)==='else if '){t=g(r.substring(8),d);if(t.length){for(var u=0;u<t.length;u++){var o=t[u];if(v.variables[o])v.variables[o]++;else v.variables[o]=1}}else t=null;a=true}else if(r!=='continue'&&r!=='break'&&r!=='else'){t=g(r);for(var u=0;u<t.length;u++){var f=t[u];if(v.variables[f])v.variables[f]++;else v.variables[f]=1}if(!t.length)t=null;if(r.indexOf('|')===-1)r+=' | encode';n=r.split('|');r=n[0];n=n.slice(1);if(n.length){for(var u=0;u<n.length;u++){var c=n[u].trim();i=c.indexOf('(');if(i===-1){c='Thelpers.$execute($helpers,model,\''+c+'\',)'}else c='Thelpers.$execute($helpers,model,\''+c.substring(0,i)+'\',,'+c.substring(i+1);n[u]=c}}else n=null;r=v.safe(r.trim()||'model');s=false}v.commands.push({index:v.commands.length,cmd:r,ifcount:p,loopcount:h,variable:t,helpers:n,isloop:l,isif:a,iscode:s});return v.split}).split(v.split);for(var r=0;r<v.builder.length;r++){var t=v.builder[r];v.builder[r]=t?t.replace(i,''):t}return v.make()};a.prototype.safe=function(e){var r=e.split('.');var t=[];for(var n=1;n<r.length;n++){var i=r.slice(0,n).join('.');t.push(i+'==null?\'\':')}return t.join('')+r.join('.')};a.prototype.make=function(){var e=this;var r=['var $output=$text[0];var $tmp;var $index=0;'];for(var t=0,n=e.commands.length;t<n;t++){var i=e.commands[t];var a;t&&r.push('$output+=$text['+t+'];');if(i.iscode){if(i.isloop){var l='$i'+Math.random().toString(16).substring(3,6);var s=l+'a';a=i.cmd.substring(i.cmd.lastIndexOf(' in ')+4).trim();a=s+'='+e.safe(a)+';if(!('+s+' instanceof Array)){if('+s+'&&typeof('+s+')===\'object\')'+s+'=Tangular.toArray('+s+')}if('+s+' instanceof Array&&'+s+'.length){for(var '+l+'=0,'+l+'l='+s+'.length;'+l+'<'+l+'l;'+l+'++){$index='+l+';var '+i.cmd.split(' ')[1]+'='+s+'['+l+'];';r.push(a)}else if(i.isif){if(i.cmd.substring(0,8)==='else if ')r.push('}'+i.cmd.substring(0,8).trim()+'('+i.cmd.substring(8).trim()+'){');else r.push(i.cmd.substring(0,3).trim()+'('+i.cmd.substring(3).trim()+'){')}else{switch(i.cmd){case'else':r.push('}else{');break;case'end':r.push('}}');break;case'fi':r.push('}');break;case'break':r.push('break;');break;case'continue':r.push('continue;');break}}}else{if(i.helpers){var u='';for(var o=0;o<i.helpers.length;o++){var f=i.helpers[o];if(o===0)u=f.replace('',i.cmd.trim()).trim();else u=f.replace('',u.trim())}r.push('$tmp='+u+';if($tmp!=null)$output+=$tmp;')}else r.push('if('+i.cmd+'!=null)$output+='+i.cmd+';')}}r.push((n?'$output+=$text['+n+'];':'')+'return $output.charAt(0) === \'\\n\'?$output.substring(1):$output;');delete e.variables.$;var c=Object.keys(e.variables);var v=['$helpers||{}','$||{}','model'];for(var t=0;t<c.length;t++)v.push('model.'+c[t]);var p='var tangular=function($helpers,$,model'+(c.length?','+c.join(','):'')+'){'+r.join('')+'};return function(model,$,$helpers){try{return tangular('+v.join(',')+')}catch(e){console.error(\'Tangular error:\',e + \'\',$template)}}';return new Function('$text','$template',p)(e.builder,e.template)};v.$execute=function(e,r,t,n,i,a,l,s,u,o,f){var c=v[t]||e[t];if(!c){console&&console.warn('Tangular: missing helper','"'+t+'"');return n}return c.call(r,n,i,a,l,s,u,o,f)};v.encode=function(e){return e==null?'':(e+'').replace(r,function(e){switch(e){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return e})};v.raw=function(e){return e};t.render=function(e,r,t,n){var e=(new a).compile(e);return e(r==null?{}:r,t,n)};t.compile=function(e){return(new a).compile(e)};t.register=function(e,r){v[e]=r;return t}})(typeof window==='undefined'?global:window);